var ext=function(){var a;return{init:function(){var b=document.getElementsByTagName("body")[0],c=document.createElement("canvas"),d=new Date;chrome.extension.onMessage.addListener(function(a,b,c){"create_image"==a.action&&null!=a.src&&(console.log(a.src),ext.createImage(a.src,c))}),a=Math.floor(d.getTime()*Math.PI),c.setAttribute("id",a),b.appendChild(c),document.getElementById(a).style.display="none"},createImage:function(b){var c=document.querySelector('video>source[src*="'+b+'"]').parentNode,d=document.getElementById(a),e=d.getContext("2d");d.width=c.offsetWidth,d.height=c.offsetHeight,e.drawImage(c,0,0),chrome.extension.sendRequest({image_link:d.toDataURL("img/png")},function(){})},saveImage:function(){}}}();ext.init();